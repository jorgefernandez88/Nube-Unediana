<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Aranceles UNED</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Fuente Orbitron para timer digital -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <h1 style="display: flex; flex-direction: column; align-items: center; gap: 5px;">
            <div><i class="fas fa-calculator"></i> Calculadora de Aranceles</div>
            <nav class="page-nav"
                style="background: transparent; box-shadow: none; border: none; padding: 0; width: auto; min-height: 0; margin: 0;">
                <ul style="padding: 0; margin: 0;">
                    <li>
                        <a href="index.html" style="padding: 5px 20px; font-size: 0.9rem;">
                            <i class="fas fa-arrow-left nav-icon" style="font-size: 1rem;"></i>
                            <span class="nav-text" style="font-size: 0.9rem;">Volver al inicio</span>
                            <i class="fas fa-home nav-icon" style="margin-left: 10px; font-size: 1rem;"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </h1>
        <nav>

            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" onchange="toggleTheme()" />
                    <div class="slider">
                        <span class="theme-icon sun">‚òÄÔ∏è</span>
                        <span class="theme-icon moon">üåô</span>
                    </div>
                </label>
            </div>
        </nav>
    </header>
    <main>

        <div class="welcome-section">
            <h3>Esta calculadora toma los montos oficiales de la UNED, que al ser seleccionados, los suma para indicar
                el total a pagar
                seg√∫n el nivel acad√©mico y el tipo de beca.</h3>
        </div>

        <!-- Bot√≥n expandible para instrucciones -->
        <button class="instrucciones-toggle-btn" onclick="toggleInstrucciones()">
            <span>Ver instrucciones</span>
            <i class="fas fa-chevron-down"></i>
        </button>

        <!-- Contenido colapsable de instrucciones -->
        <div class="instrucciones-content">
            <table class="explicaciones-tabla">
                <thead>
                    <tr>
                        <th colspan="2">Instrucciones:</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="icono-celda">
                            <i class="fas fa-calculator"></i>
                        </td>
                        <td class="contenido-celda">
                            <ol class="pasos-lista">
                                <li class="paso-item">Seleccione el tipo de beca o sin beca.</li>
                                <li class="paso-item">Seleccione el nivel acad√©mico.</li>
                                <li class="paso-item">Ponga el check izquierdo en el √≠tem que va a matricular (ej:
                                    Asignatura regular).</li>
                                <li class="paso-item">En la casilla derecha anote la cantidad.</li>
                            </ol>
                            <span class="nota-importante">
                                <i class="fas fa-info-circle"></i>
                                Autom√°ticamente ver√° en el resumen el total a pagar incluyendo el arancel de matr√≠cula.
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p style="margin-top: 20px; font-size: var(--font-size-small); color: var(--text-light);">
            <i class="fas fa-exclamation-triangle"></i>
            Esta herramienta no sustituye a los medios de comunicaci√≥n oficiales de la UNED, solo es con fines
            informativos.
        </p>


        <div class="container-aranceles">
            <h2>Seleccione su tipo de beca</h2>
            <div class="beca-selector">
                <div class="beca-option">
                    <input type="radio" id="sin-beca" name="tipo-beca" value="sin-beca" checked>
                    <label for="sin-beca">Sin beca</label>
                </div>
                <div class="beca-option">
                    <input type="radio" id="beca-A" name="tipo-beca" value="beca-a">
                    <label for="beca-A">Beca A</label>
                </div>
                <div class="beca-option">
                    <input type="radio" id="beca-B" name="tipo-beca" value="beca-b">
                    <label for="beca-B">Beca B</label>
                </div>
                <div class="beca-option">
                    <input type="radio" id="beca-C" name="tipo-beca" value="beca-c">
                    <label for="beca-C">Beca C</label>
                </div>
                <div class="beca-option">
                    <input type="radio" id="beca-D" name="tipo-beca" value="beca-d">
                    <label for="beca-D">Beca D</label>
                </div>
                <div class="beca-option">
                    <input type="radio" id="beca-E" name="tipo-beca" value="beca-e">
                    <label for="beca-E">Beca E</label>
                </div>
            </div>

            <div class="programa-selector">
                <h3>Seleccione su nivel acad√©mico</h3>
                <div class="custom-select-wrapper">
                    <select id="programa-academico">
                        <option value="tecnico">T√©cnico/Diplomado</option>
                        <option value="profesorado">Profesorado/Bachillerato</option>
                        <option value="licenciatura">Licenciatura</option>
                    </select>
                    <div class="custom-select-trigger">
                        <span class="custom-select-value">T√©cnico/Diplomado</span>
                        <span class="custom-select-arrow">‚ñº</span>
                    </div>
                    <div class="custom-select-options">
                        <div class="custom-select-option selected" data-value="tecnico">T√©cnico/Diplomado</div>
                        <div class="custom-select-option" data-value="profesorado">Profesorado/Bachillerato</div>
                        <div class="custom-select-option" data-value="licenciatura">Licenciatura</div>
                    </div>
                </div>
            </div>

            <div id="beca-mensaje" class="beca-mensaje"></div>
            <div class="aranceles-tabla-container">
                <h3>Aranceles por materias (en colones)</h3>
                <table class="aranceles-tabla">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Tipo de Materia</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-aranceles-body"></tbody>
                </table>
            </div>
            <div class="resumen-aranceles">
                <h3>Resumen de aranceles a pagar</h3>
                <div id="lista-seleccion" class="lista-seleccion"></div>
                <div class="total-container">
                    <strong>Total a pagar:</strong>
                    <span id="total-pagar">‚Ç°0</span>
                </div>
            </div>
        </div>
    </main>
    <!-- Page Navigation -->
    <nav class="page-nav">
        <ul>
            <li>
                <a href="calculadoranotas.html">
                    <i class="fas fa-check nav-icon"></i>
                    <span class="nav-text">Calcular Notas</span>
                </a>
            </li>
            <li>
                <a href="calculadoramargen.html">
                    <i class="fas fa-chart-pie nav-icon"></i>
                    <span class="nav-text">Calcular Margen</span>
                </a>
            </li>
            <li>
                <a href="calculadoraredondeo.html">
                    <i class="fas fa-percentage nav-icon"></i>
                    <span class="nav-text">Redondear</span>
                </a>
            </li>
            <li>
                <a href="calculadoraaranceles.html">
                    <i class="fas fa-coins nav-icon"></i>
                    <span class="nav-text">Calcular Aranceles</span>
                </a>
            </li>
            <li>
                <a href="pomodorotimer.html">
                    <i class="fas fa-stopwatch nav-icon"></i>
                    <span class="nav-text">Pomodoro</span>
                </a>
            </li>
        </ul>
    </nav>
    <footer>
        <nav>
            <a href="https://www.facebook.com/educadcr"><i class="fab fa-facebook"></i></a>
        </nav>
        <h5>&copy; 2025 Proyecto de Educaci√≥n a Distancia CR <br> Elaborado por Jorge Fern√°ndez</h5>
        <h5><a href="avisolegal.html" class="legal-link">Aviso Legal</a></h5>
    </footer>

    <!-- Audios -->
    <audio id="themeSwitchSound" preload="auto">
        <source src="sounds/prendido.mp3" type="audio/mpeg">
    </audio>
    <audio id="becaSelectSound" preload="auto">
        <source src="sounds/modpomodoro.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ===== VARIABLES GLOBALES ESPEC√çFICAS DE ARANCELES =====
        let audioDesbloqueado = false;

        const arancelesMatricula = {
            "sin-beca": 17293, "beca-a": 0, "beca-b": 2700,
            "beca-c": 6348.25, "beca-d": 9996.50, "beca-e": 13644.75
        };

        // ===== FUNCIONES DE AUDIO =====
        function desbloquearAudio() {
            if (audioDesbloqueado) return;
            const audios = [
                document.getElementById('themeSwitchSound'),
                document.getElementById('becaSelectSound')
            ];
            audios.forEach(audio => {
                if (audio) {
                    audio.volume = 0;
                    audio.play().then(() => {
                        audio.pause();
                        audio.currentTime = 0;
                        audio.volume = 1;
                    }).catch(e => { });
                }
            });
            audioDesbloqueado = true;
        }

        function reproducirSonidoSeguro(audioId, volumen = 1) {
            const audio = document.getElementById(audioId);
            if (!audio) return;
            audio.currentTime = 0;
            audio.volume = volumen;
            audio.play().catch(e => console.log('Error audio:', e.message));
        }

        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', function () {
            // Configurar custom select
            const wrapper = document.querySelector('.custom-select-wrapper');
            if (wrapper) {
                const trigger = wrapper.querySelector('.custom-select-trigger');
                const options = wrapper.querySelector('.custom-select-options');
                const optionElements = wrapper.querySelectorAll('.custom-select-option');
                const valueDisplay = wrapper.querySelector('.custom-select-value');
                const hiddenSelect = wrapper.querySelector('select');

                trigger.addEventListener('click', function (e) {
                    e.stopPropagation();
                    trigger.classList.toggle('active');
                    options.classList.toggle('active');
                });

                optionElements.forEach(option => {
                    option.addEventListener('click', function () {
                        const value = this.getAttribute('data-value');
                        const text = this.textContent.trim();
                        valueDisplay.textContent = text;
                        optionElements.forEach(opt => opt.classList.remove('selected'));
                        this.classList.add('selected');
                        hiddenSelect.value = value;
                        hiddenSelect.dispatchEvent(new Event('change', { bubbles: true }));
                        trigger.classList.remove('active');
                        options.classList.remove('active');
                    });
                });

                document.addEventListener('click', function (e) {
                    if (!wrapper.contains(e.target)) {
                        trigger.classList.remove('active');
                        options.classList.remove('active');
                    }
                });

                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Escape') {
                        trigger.classList.remove('active');
                        options.classList.remove('active');
                    }
                });
            }

            // Desbloquear audio con interacci√≥n del usuario
            document.body.addEventListener('click', desbloquearAudio, { once: true });
            document.body.addEventListener('touchstart', desbloquearAudio, { once: true });

            // Agregar sonido a los botones de beca
            const becaOptions = document.querySelectorAll('input[name="tipo-beca"]');
            becaOptions.forEach(option => {
                option.addEventListener('change', function () {
                    desbloquearAudio();
                    reproducirSonidoSeguro('becaSelectSound');
                });
            });
            // Inicializar calculadora de aranceles
            if (typeof inicializarCalculadoraAranceles === 'function') {
                inicializarCalculadoraAranceles();
            }
        });
    </script>

</body>

</html>